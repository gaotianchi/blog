## 项目背景和目标
为解决客户客户定制化个人博客网站的需求，我们开启了这个项目，具体内容请参考需求概要文档中的项目背景和动机相关部分。
## 范围
- 功能范围：详细内容请参考需求概要文档中的范围与限制相关部分；
- 非功能范围：详细内容请参考需求概要文档中的范围与限制相关部分；
## 功能需求
### 用户管理
共包括三类用户，分别是博主、订阅者以及匿名访客，他们的特定如下：
- 博主：网站的内容创作者以及各种事务的管理者，其中一项职责就是管理其他类型的用户；
- 订阅者：使用邮箱注册订阅者账号的用户，该邮箱被认证为有效；
- 访客：未注册的网站浏览者；

#### UR-001
- 名称：用户注册；
- 主要参与者：用户（博主或者订阅者）；
- 前置条件：暂无；
- 后置条件：用户的账户信息被保存；
- 触发条件：用户提交账号注册表单；
- 涉众及其关注点：
	- 博主想要初始化网站账户；
	- 订阅者想创建一个账户以便获取某些权限；
	- 系统希望用户填写有效的表单信息；
- 主成功情境（MSC）：
	1. 用户访问账户注册页面；
	2. 用户填写表单信息并提交；
	3. 系统检测表单信息的有效性；
	4. 系统提示用户注册成功；
	5. 系统重定向到指定页面；
- 拓展情况：
	- MSC1 博主已经注册过账户：
		1. 如果博主处于登录状态则直接重定向；
	- MSC3 如果博主未登录：
		1. 系统提示用户已经注册；
		2. 系统重定向到指定页面；

#### UR-002
- 用例名称：用户登录；
- 主要参与者：用户（博主或者订阅者）；
- 前置条件：UR-001；
- 后置条件：用户的登录状态被保存的相关位置；
- 触发条件：用户提交登录表单；
- 涉众及其关注点：
	- 博主想要登录账号以便管理网站内容；
	- 订阅者想要获取类似于发表评论之类的权限；
	- 系统希望用户填写有效的表单信息；
- 主成功情境：类似于 UR-002；
- 拓展情境：
	- MSC1 用户已经登录：
		1. 系统提示用户已经登录成功；
		2. 系统直接重定向到指定页面；

#### UR-003
- 用例名称：权限管理；
- 主要参与者：系统；
- 前置条件：UR-001；
- 后置条件：确保用户信息不被其他用户恶意篡改；
- 触发条件：暂无；
- 涉众及其关注点：
	- 系统要确保博主的创作内容以及网站的环境不会被恶意订阅者或者访客破坏；
	- 博主希望能够锁定或者注销恶意订阅者的账号；
	- 高权限者不希望自己的信息被低权限者恶意篡改；
- 主成功情境：
	1. 用户登录账号；
	2. 系统根据权限配置信息为不同类型的用户设置不同的权限；
- 拓展情境：暂无；

#### UR-004
- 用例名称：状态管理；
- 主要参与者：系统；
- 前置条件：
	- UR-002；
	- UR-003；
- 后置条件：用户可以适时地使用自己的权限；
- 触发条件：暂无；
- 涉众及其关注点：
	- 用户希望自己在使用自己的权限的时候不受影响；
	- 系统希望提供给不同用户不同的界面；
- 主成功情境：
	- 用户登录账号；
	- 系统为不同的用户提供不同的界面；
- 拓展情境：暂无；

#### UR-005
- 用例名称：锁定订阅用户；
- 主要参与者：博主；
- 前置条件：UR-002；
- 后置条件：订阅用户的状态发生变化；
- 触发条件：博主点击相关操作按钮；
- 涉众及其关注点：
	- 博主希望能够快速便捷的锁定发表恶意评论的订阅用户；
- 主成功情境：
	1. 博主访问订阅用户管理页面；
	2. 博主锁定指定用户；
	3. 系统更新相关订阅者的账户信息；
	4. 系统发送相关邮件提醒被锁定的用户；
	5. 系统提示博主操作成功；
- 拓展情境：暂无；

#### UR-006
- 用例名称：更新用户信息；
- 主要参与者：用户；
- 前置条件：
	- UR-001；
	- UR-002；
- 后置条件：用户的账户信息发生变动；
- 触发条件：用户提交账户信息更新表单或者用户的某些账户信息超过临界条件；
- 涉众及其关注点：
	- 博主希望能够在一个界面统一管理自己的账户信息以及博客网站的信息；
	- 订阅者希望自己的积分能够及时自动更新；
- 主成功情境：
	1. 用户访问账户信息更新界面；
	2. 用户更新自己的账户信息并提交表单；
	3. 系统更新对应用户的账户信息；
	4. 系统提示用户账户信息更新成功；
- 拓展情境：
	- 更新绑定邮箱；
	- 更新密码；


### 内容管理
目前的设定中包含两种内容，分别是文章和软件作品演示。
文章包含的字段有：

- 标题；
- 正文；
- 创作日期（默认值为文章的创建日期，可自定义）；
- 作者（默认值为博主的笔名，不可以自定义）；
- 发布日期（默认值为空，最终值为点击发布按钮时的日期，不可自定义）；
- 话题（默认值为空，可自定义）；
- 系列（默认值为空，可自定义）；
- 概要（默认值为文章正文的前部分，可自定义）；
- 封面（自定义且必需）；

软件作品演示包含的字段有：

- 标题
- 简介
- 标签
- 项目链接
- 作者
- 创作时间（默认值为发布时间）
- 发布时间
- 图片
#### 发布文章
- 参与者：博主；
- 前置条件：博主已经登录；
- 触发条件：博主创作文章并点击发布按钮；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主进入文章创作页面；
	2. 系统创建一篇默认空文章并将其保存为草稿；
	3. 系统显示文章创作表单；
	4. 博主输入文章标题和正文；
	5. 在博主编辑内容的过程中系统自动将表单数据保存至草稿；
	6. 博主点击发布按钮；
	7. 系统验证表单信息的有效性；
	8. 系统保存文章信息；
	9. 系统显示文章发布成功，并重定向的文章详细页面；
- 拓展情境：
	- 博主自定义创作日期；
	- 博主自定义话题；
		1. 博主输入话题；
		2. 系统从已有的话题中推选出相关话题；
		3. 博主点击相关话题；
		4. 被点击的话题字段被加入话题队列；
		5. 系统更新该文章草稿的话题；
		6. 从主成功情境的第五步开始执行；
	- 博主自定义系列；
		1. 博主点击系列下拉菜单；
		2. 系统展示所有系列；
		3. 博主选中所需系列；
		4. 系统更新该文章草稿的系列；
		5. 从主成功情境的第五步开始执行；
	- 博主为这个文章创建新系列；
- 后置条件：文章发布成功；
#### 编辑文章
同创作文章；

#### 删除文章
- 参与者：博主；
- 前置条件：文章已经创建、博主登录成功；
- 触发条件：博主点击删除按钮并确认；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主在相关页面锁定文章删除按钮；
	2. 博主点击删除按钮；
	3. 系统显示确认框；
	4. 博主点击确认；
	5. 系统更新文章状态；
	6. 系统提示文章状态；
- 拓展情境：
	- 文章为草稿；
		1. 文章被彻底删除；
	- 文章已经发布；
		1. 文章被设置草稿；
- 后置条件：文章状态被更新；
#### 批量管理文章
- 参与者：博主；
- 前置条件：文章创建成功；
- 触发条件：点击批量管理按钮；
- 主成功情境：
	1. 博主访问文章管理面板；
	2. 博主点击批量管理按钮；
	3. 系统为每个文章添加选择框并显示全选框；
	4. 博主勾选多个选择框；
	5. 博主点击删除按钮；
	6. 系统显示删除确认框；
	7. 博主点击确认；
	8. 系统接收到上述多个文章的请求；
	9. 系统将多个文章删除；
	10. 系统提示文章删除成功；
- 拓展情境：
	- 批量设置为草稿：
		1. 博主点击还原为草稿按钮；
		2. 系统将多个文章设置为草稿；
		3. 系统提示设置成功；
	- 批量发布：同上；
#### 设置文章话题
在许多博客网站中使用标签标注文章，这个博客网站也不例外，只不过使用话题这一说法来取代标签，这种叫法来自于 GITHUB，每个文章都可以添加零至多个话题。并没有单独的创建话题的界面，在文章编辑界面，博主在话题字段中输入词语的过程中就伴随着话题的创建。每个话题作为一个独立的单元不可编辑，只能新建或者删除。

- 参与者：博主；
- 前置条件：文章已经创建、博主登录成功；
- 触发条件：文章草稿的更新或者文章的发布；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主进入文章编辑界面；
	2. 博主开始编辑文章话题；
	3. 博主输入一些字段；
	4. 系统按照一定频率从数据库中拉取匹配的已经存在的话题；
	5. 博主选中某个话题；
	6. 从第三步开始执行；
	7. 系统按照一定频率更新草稿数据；
- 拓展情境：
	- 博主输入了一个全新的话题；
		1. 博主点击确认；
		2. 系统创建了一个新的话题；
- 后置条件：文章成功设置话题并创建了之前没有的话题；
#### 设置文章系列
系列是对文章的另一种组织方式，系列的另一种叫法是分类，但是在这个博客网站中不采用分类的叫法。一个文章系列组织了关系最为密切的多个文章，通常情况是为了实现某个专门的目的而写的多个文章。
- 参与者：博主；
- 前置条件：文章创建成功；
- 触发条件：博主点击某个系列的触发按钮；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主进入文章编辑界面；
	2. 博主开始编辑文章系列；
	3. 博主在菜单中选择合适的系列；
	4. 系统更新文章草稿的系列数据；
- 拓展情境：
	- 博主需要建立一个新的系列；
	- 博主需要进入系列管理面板新建系列；
- 后置条件：文章成功设置话题；
#### 创建系列
- 参与者：博主；
- 前置条件：博主登陆成功；
- 触发条件：博主点击创建按钮；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主进入系列管理界面；
	2. 博主点击创建按钮；
	3. 系统展示创建系列的表单；
	4. 博主在表单中输入图片；
	5. 系统展示图片剪裁组件；
	6. 博主上传剪裁完成的封面；
	7. 系统处理用户上传的系列封面；
	8. 博主填写系列标题；
	9. 博主提交表单；
	10. 系统验证表单的有效性；
	11. 系统提示文章系列创建成功；
- 拓展情境：
	- 输入框中输入的图片大小或者格式不符合规范；
		1. 系统提示博主封面上传失败，并给出原因；
		2. 从第四步开始；
	- 系统简介为空；
		1. 系统提示博主系列标题不能为空；
		2. 从第八步开始；
- 后置条件：成功创建一个新系列；
#### 编辑系列
- 参与者：博主；
- 前置条件：某系列已经创建；
- 触发条件：点击编辑按钮；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主锁定某个具体的系列；
	2. 博主点击编辑按钮；
	3. 系统展示系列编辑表单；
	4. 博主像创建系列一样编辑系列（同上）；
- 拓展情境：暂无；
- 后置条件：更新系列数据；
#### 删除系列
- 参与者：博主；
- 前置条件：该系列已经创建；
- 触发条件：点击删除按钮并确认；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主点击某系列的删除按钮；
	2. 系统弹出确认弹窗；
	3. 博主点击确认；
	4. 系统接收到删除系列的请求；
	5. 系统更新该系列下的所有文章和草稿；
	6. 系统将系列删除；
	7. 系统提示系列删除成功；
- 拓展情境：暂无；
- 后置条件：系列被删除，该系列下的所有文章和草稿被更新；

### 反馈管理
反馈系统主要针对于文章，与文章不同，SWD 仅仅是信息的呈现，不涉及到用户的反馈。文章的反馈内容包括：

- 留言；
- 评分；
#### 创建文章反馈
订阅者可以提交留言或者评分的任意一个，但不可以全部留空；
- 参与者：订阅者；
- 前置条件：订阅者登录；
- 触发条件：点击提交按钮；
- 涉众：文章反馈服务；
- 主成功情境：
	1. 系统呈现文章反馈表单；
	2. 订阅者填写文章分数以及评论内容；
	3. 订阅者提交反馈表单；
	4. 系统检测反馈表但的有效性；
	5. 系统保存反馈信息；
	6. 系统提示订阅者反馈成功；
	7. 反馈信息显示在指定位置；
- 拓展情况：
- 
	- 留言和评分都为空：
		1. 系统提示留言和评分至少写一个；
		2. 订阅者按照系统提示操作；
		3. 从第四步开始；
	- 订阅者没有登录：
		1. 系统重定向到登录页面；
		2. 登陆成功后重定向到反馈界面；
		3. 从第一步开始；
	- 订阅者的邮箱没有通过验证：
		1. 订阅者无法给文章评分；
		2. 订阅者输入评论内容；
		3. 从第三步开始；
	- 反馈对象是其他反馈：
		1. 系统只呈现评论表单，无法给文章评分；
		2. 订阅者输入评论内容；
		3. 从第三步开始；
- 后置条件：文章反馈创建成功；
#### 编辑文章反馈
- 参与者：订阅者；
- 前置条件：创建文章反馈；
- 触发条件：订阅者点击编辑按钮；
- 涉众：反馈管理服务；
- 主成功情境：
	1. 订阅者点击编辑按钮；
	2. 系统展示反馈表单；
	3. 剩下的和上面的创建文章反馈相同；
#### 删除文章反馈
- 参与者：订阅者；
- 前置条件：创建反馈；
- 触发条件：点击删除按钮并确认；
- 涉众：反馈管理服务；
- 主成功情境：同上；
- 拓展情境：
	- 该反馈内容存在子反馈：
		1. 系统将原始内容替换为预留内容，比如“该内容已被删除”。
		2. 系统将订阅者相关信息也替换为预留内容；
- 后置条件：反馈内容被删除；
#### 标注页面浏览量
- 参与者：订阅者（包括未验证的订阅者）以及匿名用户；
- 前置条件：无
- 触发条件：页面加载完成；
- 涉众：反馈管理服务；
- 主成功情境：
	1. 上述参与者使用浏览器访问某个页面；
	2. 页面加载完成；
	3. 系统标记参与者类型、访问的页面以及停留的时间等数据；
	4. 系统将上述数据保存；
- 拓展情境：
	- 访问者是机器人；
- 后置条件：系统保存浏览量反馈数据；
#### 审阅订阅者的留言
- 参与者：博主；
- 前置条件：博主登录，创建反馈；
- 触发条件：订阅者提交反馈；
- 涉众：订阅者（包括邮箱未验证的订阅者）；
- 主成功情境：
	1. 博主访问反馈管理面板；
	2. 博主依次查看待审阅的评论反馈
	3. 博主进行批量操作将违规评论设置为未通过审阅；
	4. 博主进行批量操作将正常评论设置为通过审阅；
	5. 系统提示博主操作成功；
- 拓展情境：暂无；
- 后置条件：通过审核的评论将正常显示在相应文章下，未通过审核的评论将使用预留文字显示在相关文章下；