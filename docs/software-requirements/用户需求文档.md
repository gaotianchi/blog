## 项目背景和目标
为解决客户客户定制化个人博客网站的需求，我们开启了这个项目，具体内容请参考需求概要文档中的项目背景和动机相关部分。
## 范围
- 功能范围：详细内容请参考需求概要文档中的范围与限制相关部分；
- 非功能范围：详细内容请参考需求概要文档中的范围与限制相关部分；
## 功能需求
### 用户管理
共包括四类用户，分别是博主、订阅者、未验证订阅者以及匿名访客，他们的特定如下：
- 博主：网站的内容创作者以及各种事务的管理者，其中一项职责就是管理其他类型的用户；
- 订阅者：使用邮箱注册订阅者账号的用户，该邮箱被认证为有效；
- 未验证订阅者：使用邮箱参与网站内容反馈的访客，该邮箱没有通过验证；
- 匿名访客：除了浏览记录不留下其他数据的访客；
#### 博主注册
- 参与者：博主；
- 前置条件：博主没有注册过账号；
- 触发条件：博主访问注册页面并提交注册表单；
- 涉众：用户管理服务；
- 主成功情境：
	1. 博主访问注册页面；
	2. 系统显示注册表单；
	3. 博主输入用户名、密码以及电子邮箱地址；
	4. 博主点击按钮获取邮箱验证码；
	5. 博主从邮箱中获取相应验证码并填写在表单相应位置；
	6. 博主提交注册表单；
	7. 系统验证输入信息的有效性；
	8. 系统保存博主基本账户信息；
	9. 系统显示注册成功消息；
	10. 系统重定向到博客登录页；
- 拓展情境：
	- 博主已经注册过；
		1. 提示网站只能注册一个博主账号；
		2. 跳转到登录页面；
	- 表单信息不符合格式要求；
		1. 提示发生错误的地方并给出格式要求；
		2. 清空发生错误的表单；
		3. 从主成功情境的第三步开始执行；
	- 邮箱验证码错误；
		1. 提示邮箱验证码错误；
		2. 点击重新发送；
		3. 从主成功情境的第五步开始执行；
- 后置条件：博主账号已经成功创建；

#### 博主登录
- 参与者：博主；
- 前置条件：博主已经成功注册账号；
- 触发条件：博主访问登录页面并提交登录表单；
- 涉众：用户管理服务；
- 主成功情境：
	1. 博主访问登录页面；
	2. 系统显示登录表单；
	3. 博主输入用户名和密码；
	4. 博主提交登录表单；
	5. 系统验证输入信息的有效性；
	6. 系统保存博主的登录状态；
	7. 系统显示登陆成功消息；
	8. 系统自动跳转到指定页面；
- 拓展情境：
	- 表单信息不符合格式要求；
		1. 系统提示发生错误的原因；
		2. 系统清空发生错误的表单数据；
		3. 从主成功情境的第三步开始执行；
	- 用户名不存在；
		1. 提示用户名不存在；
		2. 从主成功情境的第三步开始执行；
	- 密码错误；
		1. 提示密码错误；
		2. 从主成功情境的第三步开始执行；
- 后置条件：博主已经成功登录账号；

#### 博主登出
- 参与者：博主；
- 前置条件：博主已经成功登录账号；
- 触发条件：点击登出按钮；
- 涉众：用户管理服务；
- 主成功情境：
	1. 博主点击登出按钮；
	2. 系统接收到登出请求；
	3. 系统销毁博主的会话；
	4. 系统清楚博主的登陆状态（例如，移除存储在浏览器中的会话Cookie或令牌）；
	5. 系统显示登出消息；
	6. 系统重定向到博主的登录页面或者首页；
- 拓展情境：
	- 会话已经过期；
		1. 系统检测到会话已经过期，自动登出；
		2. 系统提示会话已经过期，并重定向到登录界面；
- 后置条件：博主的登录状态已清除，博主返回登录页面或首页；

#### 订阅者注册

- 参与者：订阅者；
- 前置条件：该订阅者没有注册过账号；
- 触发条件：订阅者提交注册表单；
- 涉众：用户管理服务；
- 主成功情境：
	1. 订阅者访问注册页面；
	2. 系统显示注册表单；
	3. 订阅者输入邮箱和昵称；
	4. 系统向该邮箱发送验证码；
	5. 系统重定向到验证码填写页面；
	6. 订阅者填写验证码；
	7. 订阅者提交验证码表单；
	8. 系统验证输入信息的有效性；
	9. 系统保存订阅者信息；
	10. 系统显示注册成功；
	11. 系统重定向到指定页面；
- 拓展情境：
	- 订阅者输入的邮箱或者昵称不符合格式规范；
		1. 系统提示相应错误；
		2. 从主成功情境的第三步开始执行；
	- 验证码错误；
		1. 系统提示验证码错误；
		2. 从主成功情境的第六部开始执行；
	- 验证码失效；
		1. 系统提示验证码失效；
		2. 系统重定向到注册表单；
		3. 从主成功情境的第三部开始执行；
- 后置条件：订阅者账户已注册成功；

#### 订阅者登录
- 参与者：订阅者；
- 前置条件：该订阅者已成功注册账号；
- 触发条件：订阅者提交登录表单；
- 涉众：用户管理服务；
- 主成功情境：
	1. 订阅者访问登录表单；
	2. 订阅者填写邮箱；
	3. 订阅者点击获取验证码的按钮；
	4. 系统发送邮箱验证码；
	5. 订阅者填写邮箱验证码；
	6. 订阅者提交登录表单；
	7. 系统验证登录信息的有效性；
	8. 系统保存订阅者的登录信息；
	9. 系统重定向到相应页面；
- 拓展情境：
	- 邮箱格式信息错误（同上）；
	- 验证码错误（同上）；
	- 验证码失效（同上）；
- 后置条件：订阅者已成功登录；

#### 订阅者登出
同博主登出

#### 订阅者注销
- 参阅者：订阅者；
- 前置条件：该订阅者已成功登录；
- 触发条件：订阅者点击注销按钮并确认；
- 涉众：用户管理服务；
- 主成功情境：
	1. 订阅者点击注销按钮；
	2. 系统接收到注销请求；
	3. 系统展示确认框；
	4. 订阅者确认信息后点击确认按钮；
	5. 系统提示订阅者注销成功；
	6. 订阅者登出；
	7. 系统修改该订阅者的账户数据；
	8. 系统重定向的注册页面或者首页；
- 拓展情境：暂无；
- 后置条件：该订阅者的账户被注销；

### 内容管理
目前的设定中包含两种内容，分别是文章和软件作品演示。
文章包含的字段有：

- 标题；
- 正文；
- 创作日期（默认值为文章的创建日期，可自定义）；
- 作者（默认值为博主的笔名，不可以自定义）；
- 发布日期（默认值为空，最终值为点击发布按钮时的日期，不可自定义）；
- 话题（默认值为空，可自定义）；
- 系列（默认值为空，可自定义）；
- 概要（默认值为文章正文的前部分，可自定义）；
- 封面（自定义且必需）；

软件作品演示包含的字段有：

- 标题
- 简介
- 标签
- 项目链接
- 作者
- 创作时间（默认值为发布时间）
- 发布时间
- 图片
#### 发布文章
- 参与者：博主；
- 前置条件：博主已经登录；
- 触发条件：博主创作文章并点击发布按钮；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主进入文章创作页面；
	2. 系统创建一篇默认空文章并将其保存为草稿；
	3. 系统显示文章创作表单；
	4. 博主输入文章标题和正文；
	5. 在博主编辑内容的过程中系统自动将表单数据保存至草稿；
	6. 博主点击发布按钮；
	7. 系统验证表单信息的有效性；
	8. 系统保存文章信息；
	9. 系统显示文章发布成功，并重定向的文章详细页面；
- 拓展情境：
	- 博主自定义创作日期；
	- 博主自定义话题；
		1. 博主输入话题；
		2. 系统从已有的话题中推选出相关话题；
		3. 博主点击相关话题；
		4. 被点击的话题字段被加入话题队列；
		5. 系统更新该文章草稿的话题；
		6. 从主成功情境的第五步开始执行；
	- 博主自定义系列；
		1. 博主点击系列下拉菜单；
		2. 系统展示所有系列；
		3. 博主选中所需系列；
		4. 系统更新该文章草稿的系列；
		5. 从主成功情境的第五步开始执行；
	- 博主为这个文章创建新系列；
- 后置条件：文章发布成功；
#### 编辑文章
同创作文章；

#### 删除文章
- 参与者：博主；
- 前置条件：文章已经创建、博主登录成功；
- 触发条件：博主点击删除按钮并确认；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主在相关页面锁定文章删除按钮；
	2. 博主点击删除按钮；
	3. 系统显示确认框；
	4. 博主点击确认；
	5. 系统更新文章状态；
	6. 系统提示文章状态；
- 拓展情境：
	- 文章为草稿；
		1. 文章被彻底删除；
	- 文章已经发布；
		1. 文章被设置草稿；
- 后置条件：文章状态被更新；
#### 批量管理文章
- 参与者：博主；
- 前置条件：文章创建成功；
- 触发条件：点击批量管理按钮；
- 主成功情境：
	1. 博主访问文章管理面板；
	2. 博主点击批量管理按钮；
	3. 系统为每个文章添加选择框并显示全选框；
	4. 博主勾选多个选择框；
	5. 博主点击删除按钮；
	6. 系统显示删除确认框；
	7. 博主点击确认；
	8. 系统接收到上述多个文章的请求；
	9. 系统将多个文章删除；
	10. 系统提示文章删除成功；
- 拓展情境：
	- 批量设置为草稿：
		1. 博主点击还原为草稿按钮；
		2. 系统将多个文章设置为草稿；
		3. 系统提示设置成功；
	- 批量发布：同上；
#### 设置文章话题
在许多博客网站中使用标签标注文章，这个博客网站也不例外，只不过使用话题这一说法来取代标签，这种叫法来自于 GITHUB，每个文章都可以添加零至多个话题。并没有单独的创建话题的界面，在文章编辑界面，博主在话题字段中输入词语的过程中就伴随着话题的创建。每个话题作为一个独立的单元不可编辑，只能新建或者删除。

- 参与者：博主；
- 前置条件：文章已经创建、博主登录成功；
- 触发条件：文章草稿的更新或者文章的发布；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主进入文章编辑界面；
	2. 博主开始编辑文章话题；
	3. 博主输入一些字段；
	4. 系统按照一定频率从数据库中拉取匹配的已经存在的话题；
	5. 博主选中某个话题；
	6. 从第三步开始执行；
	7. 系统按照一定频率更新草稿数据；
- 拓展情境：
	- 博主输入了一个全新的话题；
		1. 博主点击确认；
		2. 系统创建了一个新的话题；
- 后置条件：文章成功设置话题并创建了之前没有的话题；
#### 设置文章系列
系列是对文章的另一种组织方式，系列的另一种叫法是分类，但是在这个博客网站中不采用分类的叫法。一个文章系列组织了关系最为密切的多个文章，通常情况是为了实现某个专门的目的而写的多个文章。
- 参与者：博主；
- 前置条件：文章创建成功；
- 触发条件：博主点击某个系列的触发按钮；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主进入文章编辑界面；
	2. 博主开始编辑文章系列；
	3. 博主在菜单中选择合适的系列；
	4. 系统更新文章草稿的系列数据；
- 拓展情境：
	- 博主需要建立一个新的系列；
	- 博主需要进入系列管理面板新建系列；
- 后置条件：文章成功设置话题；
#### 创建系列
- 参与者：博主；
- 前置条件：博主登陆成功；
- 触发条件：博主点击创建按钮；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主进入系列管理界面；
	2. 博主点击创建按钮；
	3. 系统展示创建系列的表单；
	4. 博主在表单中输入图片；
	5. 系统展示图片剪裁组件；
	6. 博主上传剪裁完成的封面；
	7. 系统处理用户上传的系列封面；
	8. 博主填写系列标题；
	9. 博主提交表单；
	10. 系统验证表单的有效性；
	11. 系统提示文章系列创建成功；
- 拓展情境：
	- 输入框中输入的图片大小或者格式不符合规范；
		1. 系统提示博主封面上传失败，并给出原因；
		2. 从第四步开始；
	- 系统简介为空；
		1. 系统提示博主系列标题不能为空；
		2. 从第八步开始；
- 后置条件：成功创建一个新系列；
#### 编辑系列
- 参与者：博主；
- 前置条件：某系列已经创建；
- 触发条件：点击编辑按钮；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主锁定某个具体的系列；
	2. 博主点击编辑按钮；
	3. 系统展示系列编辑表单；
	4. 博主像创建系列一样编辑系列（同上）；
- 拓展情境：暂无；
- 后置条件：更新系列数据；
#### 删除系列
- 参与者：博主；
- 前置条件：该系列已经创建；
- 触发条件：点击删除按钮并确认；
- 涉众：文章管理服务；
- 主成功情境：
	1. 博主点击某系列的删除按钮；
	2. 系统弹出确认弹窗；
	3. 博主点击确认；
	4. 系统接收到删除系列的请求；
	5. 系统更新该系列下的所有文章和草稿；
	6. 系统将系列删除；
	7. 系统提示系列删除成功；
- 拓展情境：暂无；
- 后置条件：系列被删除，该系列下的所有文章和草稿被更新；
#### 创建软件作品演示
下面将软件作品演示简称为 SWD
- 参与者：博主；
- 前置条件：博主登录；
- 触发条件：博主点击创建软件作品演示的按钮；
- 涉众：软件作品演示管理服务；
- 主成功情境：
	1. 博主进入软件作品演示入口；
	2. 系统显示 SWD 创建表单；
	3. 博主填写 SWD 标题、简介、图片、项目链接、创作时间以及标签；
	4. 博主点击提交按钮；
	5. 系统验证表单数据的有效性；
	6. 系统提示 SWD 创建成功；
- 拓展情境：暂无；
- 后置条件：SWD 创建成功；
#### 编辑软件作品演示
同上
#### 删除软件作品演示
- 参与者：博主；
- 前置条件：创建软件作品演示；
- 触发条件：博主点击删除 SWD 并确认；
- 涉众：SWD 管理服务；
- 主成功情境：
	1. 博主点击删除按钮；
	2. 系统显示确认框；
	3. 博主点击确认按钮；
	4. 系统接收到删除 SWD 的请求；
	5. 系统将 SWD 删除；
- 拓展情境：
	- 博主点击确认框的取消按钮：取消删除 SWD；
- 后置条件：SWD 被删除；
### 反馈管理
反馈系统主要针对于文章，与文章不同，SWD 仅仅是信息的呈现，不涉及到用户的反馈。文章的反馈内容包括：

- 留言；
- 评分；
#### 创建文章反馈
订阅者可以提交留言或者评分的任意一个，但不可以全部留空；
- 参与者：订阅者；
- 前置条件：订阅者登录；
- 触发条件：点击提交按钮；
- 涉众：文章反馈服务；
- 主成功情境：
	1. 系统呈现文章反馈表单；
	2. 订阅者填写文章分数以及评论内容；
	3. 订阅者提交反馈表单；
	4. 系统检测反馈表但的有效性；
	5. 系统保存反馈信息；
	6. 系统提示订阅者反馈成功；
	7. 反馈信息显示在指定位置；
- 拓展情况：
- 
	- 留言和评分都为空：
		1. 系统提示留言和评分至少写一个；
		2. 订阅者按照系统提示操作；
		3. 从第四步开始；
	- 订阅者没有登录：
		1. 系统重定向到登录页面；
		2. 登陆成功后重定向到反馈界面；
		3. 从第一步开始；
	- 订阅者的邮箱没有通过验证：
		1. 订阅者无法给文章评分；
		2. 订阅者输入评论内容；
		3. 从第三步开始；
	- 反馈对象是其他反馈：
		1. 系统只呈现评论表单，无法给文章评分；
		2. 订阅者输入评论内容；
		3. 从第三步开始；
- 后置条件：文章反馈创建成功；
#### 编辑文章反馈
- 参与者：订阅者；
- 前置条件：创建文章反馈；
- 触发条件：订阅者点击编辑按钮；
- 涉众：反馈管理服务；
- 主成功情境：
	1. 订阅者点击编辑按钮；
	2. 系统展示反馈表单；
	3. 剩下的和上面的创建文章反馈相同；
#### 删除文章反馈
- 参与者：订阅者；
- 前置条件：创建反馈；
- 触发条件：点击删除按钮并确认；
- 涉众：反馈管理服务；
- 主成功情境：同上；
- 拓展情境：
	- 该反馈内容存在子反馈：
		1. 系统将原始内容替换为预留内容，比如“该内容已被删除”。
		2. 系统将订阅者相关信息也替换为预留内容；
- 后置条件：反馈内容被删除；
#### 标注页面浏览量
- 参与者：订阅者（包括未验证的订阅者）以及匿名用户；
- 前置条件：无
- 触发条件：页面加载完成；
- 涉众：反馈管理服务；
- 主成功情境：
	1. 上述参与者使用浏览器访问某个页面；
	2. 页面加载完成；
	3. 系统标记参与者类型、访问的页面以及停留的时间等数据；
	4. 系统将上述数据保存；
- 拓展情境：
	- 访问者是机器人；
- 后置条件：系统保存浏览量反馈数据；
#### 审阅订阅者的留言
- 参与者：博主；
- 前置条件：博主登录，创建反馈；
- 触发条件：订阅者提交反馈；
- 涉众：订阅者（包括邮箱未验证的订阅者）；
- 主成功情境：
	1. 博主访问反馈管理面板；
	2. 博主依次查看待审阅的评论反馈
	3. 博主进行批量操作将违规评论设置为未通过审阅；
	4. 博主进行批量操作将正常评论设置为通过审阅；
	5. 系统提示博主操作成功；
- 拓展情境：暂无；
- 后置条件：通过审核的评论将正常显示在相应文章下，未通过审核的评论将使用预留文字显示在相关文章下；