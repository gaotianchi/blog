## 项目背景和目标
为解决客户客户定制化个人博客网站的需求，我们开启了这个项目，具体内容请参考需求概要文档中的项目背景和动机相关部分。
## 范围
- 功能范围：详细内容请参考需求概要文档中的范围与限制相关部分；
- 非功能范围：详细内容请参考需求概要文档中的范围与限制相关部分；
## 功能需求
### 用户管理
共包括三类用户，分别是博主、订阅者以及匿名访客，他们的特定如下：
- 博主：网站的内容创作者以及各种事务的管理者，其中一项职责就是管理其他类型的用户；
- 订阅者：使用邮箱注册订阅者账号的用户，该邮箱被认证为有效；
- 访客：未注册的网站浏览者；

#### UR-001
- 名称：用户注册；
- 主要参与者：用户（博主或者订阅者）；
- 前置条件：暂无；
- 后置条件：用户的账户信息被保存；
- 触发条件：用户提交账号注册表单；
- 涉众及其关注点：
	- 博主想要初始化网站账户；
	- 订阅者想创建一个账户以便获取某些权限；
	- 系统希望用户填写有效的表单信息；
- 主成功情境（MSC）：
	1. 用户访问账户注册页面；
	2. 用户填写表单信息并提交；
	3. 系统检测表单信息的有效性；
	4. 系统提示用户注册成功；
	5. 系统重定向到指定页面；
- 拓展情况：
	- MSC1 博主已经注册过账户：
		1. 如果博主处于登录状态则直接重定向；
	- MSC3 如果博主未登录：
		1. 系统提示用户已经注册；
		2. 系统重定向到指定页面；

#### UR-002
- 用例名称：用户登录；
- 主要参与者：用户（博主或者订阅者）；
- 前置条件：UR-001；
- 后置条件：用户的登录状态被保存的相关位置；
- 触发条件：用户提交登录表单；
- 涉众及其关注点：
	- 博主想要登录账号以便管理网站内容；
	- 订阅者想要获取类似于发表评论之类的权限；
	- 系统希望用户填写有效的表单信息；
- 主成功情境：类似于 UR-002；
- 拓展情境：
	- MSC1 用户已经登录：
		1. 系统提示用户已经登录成功；
		2. 系统直接重定向到指定页面；

#### UR-003
- 用例名称：权限管理；
- 主要参与者：系统；
- 前置条件：UR-001；
- 后置条件：确保用户信息不被其他用户恶意篡改；
- 触发条件：暂无；
- 涉众及其关注点：
	- 系统要确保博主的创作内容以及网站的环境不会被恶意订阅者或者访客破坏；
	- 博主希望能够锁定或者注销恶意订阅者的账号；
	- 高权限者不希望自己的信息被低权限者恶意篡改；
- 主成功情境：
	1. 用户登录账号；
	2. 系统根据权限配置信息为不同类型的用户设置不同的权限；
- 拓展情境：暂无；

#### UR-004
- 用例名称：状态管理；
- 主要参与者：系统；
- 前置条件：
	- UR-002；
	- UR-003；
- 后置条件：用户可以适时地使用自己的权限；
- 触发条件：暂无；
- 涉众及其关注点：
	- 用户希望自己在使用自己的权限的时候不受影响；
	- 系统希望提供给不同用户不同的界面；
- 主成功情境：
	- 用户登录账号；
	- 系统为不同的用户提供不同的界面；
- 拓展情境：暂无；

#### UR-005
- 用例名称：锁定订阅用户；
- 主要参与者：博主；
- 前置条件：UR-002；
- 后置条件：订阅用户的状态发生变化；
- 触发条件：博主点击相关操作按钮；
- 涉众及其关注点：
	- 博主希望能够快速便捷的锁定发表恶意评论的订阅用户；
- 主成功情境：
	1. 博主访问订阅用户管理页面；
	2. 博主锁定指定用户；
	3. 系统更新相关订阅者的账户信息；
	4. 系统发送相关邮件提醒被锁定的用户；
	5. 系统提示博主操作成功；
- 拓展情境：暂无；

#### UR-006
- 用例名称：更新用户信息；
- 主要参与者：用户；
- 前置条件：
	- UR-001；
	- UR-002；
- 后置条件：用户的账户信息发生变动；
- 触发条件：用户提交账户信息更新表单或者用户的某些账户信息超过临界条件；
- 涉众及其关注点：
	- 博主希望能够在一个界面统一管理自己的账户信息以及博客网站的信息；
	- 订阅者希望自己的积分能够及时自动更新；
- 主成功情境：
	1. 用户访问账户信息更新界面；
	2. 用户更新自己的账户信息并提交表单；
	3. 系统更新对应用户的账户信息；
	4. 系统提示用户账户信息更新成功；
- 拓展情境：
	- 更新绑定邮箱；
	- 更新密码；


### 内容管理

#### UR-007
- 用例名称：创建草稿；
- 主要参与者：博主；
- 前置条件：UR-002；
- 后置条件：一篇包含默认数值的文章被创建并保存至草稿；
- 触发条件：博主点击创建草稿的按钮；
- 涉众及其关注点：
	- 博主希望快速创建一个草稿；
- 主成功情境：
	1. 博主点击创建草稿的按钮；
	2. 系统创建一个保存默认数据的草稿；
	3. 系统重定向到草稿/文章编辑页面；
- 拓展情境：暂无；
#### UR-008
- 用例名称：编辑草稿/文章；
- 主要参与者：博主；
- 前置条件：UR-007；
- 后置条件：文章数据被更新；
- 触发条件：系统自动检测文章内容的变动并自动保存；
- 涉众及其关注点：
	- 博主希望自己编辑的内容能够及时地自动保存以防止数据丢失；
- 主成功情境：
	1. 博主访问草稿/文章编辑页面；
	2. 博主编辑文章的各个字段的信息；
	3. 系统自动保存发生实时数据；
- 拓展情境：
	- 博主在文章自动保存之前想要退出该界面：
		1. 系统显示提示框，提示博主还有信息没有保存；
		2. 博主点击确认按钮；
		3. 系统保存相关数据；
#### UR-009
- 用例名称：发布文章/将文章还原为草稿；
- 主要参与者：博主；
- 前置条件：UR-008；
- 后置条件：文章的状态发生变化；
- 触发条件：博主点击相关按钮；
- 涉众及其关注点：
	- 博主希望快捷的发布文章或者将已经发布的文章转化为草稿；
- 主成功情境：
	1. 博主找到发布/还原按钮并点击；
	2. 系统更新草稿/文章状态；
	3. 系统提示博主操作成功；
- 拓展情境：暂无；
#### UR-010
- 用例名称：创建标签；
- 主要参与者：博主；
- 前置条件：UR-007；
- 后置条件：创建新的标签；
- 触发条件：博主在输入框输入标签名称并按回车键；
- 涉众及其关注点：
	- 博主希望能够快捷的创建标签以便更方便的组织文章；
	- 系统希望用户输入的标签符合既定的规范；
- 主成功情境：
	- 博主在输入框输入标签并点击回车键；
	- 系统识别并创建需要创建的标签；
- 拓展情境：
	- 博主输入的标签不符合规范；
		1. 系统给出响应反馈提示用户输入有效的标签信息；
#### UR-011
- 用例名称：管理标签；
- 主要参与者：博主；
- 前置条件：UR-010；
- 后置条件：标签的数量或者内容发生变化；
- 触发条件：博主点击相关按钮；
- 涉众及其关注点：
	- 博主希望在某个页面统一管理站点的所有标签；
- 主成功情境：
	1. 博主访问标签管理页面；
	2. 博主点击某个标签的删除或者编辑按钮；
	3. 系统删除或者更新选定的标签；
	4. 系统提示用户操作成功；
- 拓展情境：
	- 被删除的标签下的文章数量大于 0：
		1. 系统提示用户该标签即将删除但不会删除标签下的文章；
		2. 系统移除该标签；
		3. 系统提示用户操作成功；
#### UR-012
- 用例名称：创建/编辑/删除文章合集；
- 主要参与者：博主；
- 前置条件：UR-002；
- 后置条件：文章合集的数量或者内容发生变化；
- 触发条件：博主提交创建/编辑文章合集的表单；
- 涉众及其关注点：
	- 博主希望能够快捷的创建/编辑文章系列；
	- 系统希望博主填写有效的文章合集表单信息；
- 主成功情境：
	1. 博主填写文章合集表单信息并提交；
	2. 系统检测表单数据的有效性；
	3. 系统创建或者更新指定文章合集；
	4. 系统提示用户操作成功；
- 拓展情境：
	- 表单信息的必填项为空：
		- 系统提示用户某字段不能为空；
		- 进入 MSC1；
	- 删除合集：
		- 博主点击删除按钮；
		- 系统提示该合集将会被删除但合集下的文章不受影响；
		- 系统将该合集删除；
		- 系统提示用户操作成功；
#### UR-013
- 用例名称：管理文章合集；
- 主要参与者：博主；
- 前置条件：UR-012；
- 后置条件：文章合集的数量或内容发生变化；
- 触发条件：博主点击相关按钮；
- 涉众及其关注点：
	- 博主希望在一个页面统一管理所有文章合集；
	- 博主希望快捷的将文章从文章合集中添加/移除；
- 主成功情境：
	1. 用户范围合集管理页面；
	2. 系统呈现所有合集以及合集下的文章；
	3. 用户通过点击移除/添加按钮为指定合集移除/添加文章；
	4. 系统提示用户操作成功；
- 拓展情境：暂无；

#### UR-014
- 用例名称：更新文章/草稿标签；
- 主要参与者：用户（博主）；
- 前置条件：
	- UR-007；
	- UR-010；
- 后置条件：文章/草稿的标签信息发生变化；
- 触发条件：草稿/文章的自动保存；
- 涉众及其关注点：
	- 博主希望能够快捷的为草稿/文章添加/更新标签；
	- 系统希望用户输入符合规范的标签信息；
- 主成功情境：
	1. 用户在标签栏输入目标标签；
	2. 系统自动保存草稿/文章信息；
	3. 系统解析出所有标签并更新草稿/文章的标签数据；
- 拓展情况：暂无；
#### UR-015
- 用例名称：更新文章/草稿所属合集；
- 主要参与者：用户（博主）；
- 前置条件：
	- UR-007；
	- UR-012；
- 后置条件：文章/草稿所属的合集信息发生变化；
- 涉众及其关注点：
	- 用户希望尽可能便捷地为文章/草稿设置所属合集；
- 主成功情境：
	1. 在文章/草稿编辑页面用户选择指定的文章合集；
	2. 系统更新文章/草稿的合集；
	3. 系统提示用户操作成功；
- 拓展情况：暂无；


### 反馈管理
反馈系统主要针对于文章，与文章不同，SWD 仅仅是信息的呈现，不涉及到用户的反馈。文章的反馈内容包括：

- 留言；
- 评分；
#### 创建文章反馈
订阅者可以提交留言或者评分的任意一个，但不可以全部留空；
- 参与者：订阅者；
- 前置条件：订阅者登录；
- 触发条件：点击提交按钮；
- 涉众：文章反馈服务；
- 主成功情境：
	1. 系统呈现文章反馈表单；
	2. 订阅者填写文章分数以及评论内容；
	3. 订阅者提交反馈表单；
	4. 系统检测反馈表但的有效性；
	5. 系统保存反馈信息；
	6. 系统提示订阅者反馈成功；
	7. 反馈信息显示在指定位置；
- 拓展情况：
- 
	- 留言和评分都为空：
		1. 系统提示留言和评分至少写一个；
		2. 订阅者按照系统提示操作；
		3. 从第四步开始；
	- 订阅者没有登录：
		1. 系统重定向到登录页面；
		2. 登陆成功后重定向到反馈界面；
		3. 从第一步开始；
	- 订阅者的邮箱没有通过验证：
		1. 订阅者无法给文章评分；
		2. 订阅者输入评论内容；
		3. 从第三步开始；
	- 反馈对象是其他反馈：
		1. 系统只呈现评论表单，无法给文章评分；
		2. 订阅者输入评论内容；
		3. 从第三步开始；
- 后置条件：文章反馈创建成功；
#### 编辑文章反馈
- 参与者：订阅者；
- 前置条件：创建文章反馈；
- 触发条件：订阅者点击编辑按钮；
- 涉众：反馈管理服务；
- 主成功情境：
	1. 订阅者点击编辑按钮；
	2. 系统展示反馈表单；
	3. 剩下的和上面的创建文章反馈相同；
#### 删除文章反馈
- 参与者：订阅者；
- 前置条件：创建反馈；
- 触发条件：点击删除按钮并确认；
- 涉众：反馈管理服务；
- 主成功情境：同上；
- 拓展情境：
	- 该反馈内容存在子反馈：
		1. 系统将原始内容替换为预留内容，比如“该内容已被删除”。
		2. 系统将订阅者相关信息也替换为预留内容；
- 后置条件：反馈内容被删除；
#### 标注页面浏览量
- 参与者：订阅者（包括未验证的订阅者）以及匿名用户；
- 前置条件：无
- 触发条件：页面加载完成；
- 涉众：反馈管理服务；
- 主成功情境：
	1. 上述参与者使用浏览器访问某个页面；
	2. 页面加载完成；
	3. 系统标记参与者类型、访问的页面以及停留的时间等数据；
	4. 系统将上述数据保存；
- 拓展情境：
	- 访问者是机器人；
- 后置条件：系统保存浏览量反馈数据；
#### 审阅订阅者的留言
- 参与者：博主；
- 前置条件：博主登录，创建反馈；
- 触发条件：订阅者提交反馈；
- 涉众：订阅者（包括邮箱未验证的订阅者）；
- 主成功情境：
	1. 博主访问反馈管理面板；
	2. 博主依次查看待审阅的评论反馈
	3. 博主进行批量操作将违规评论设置为未通过审阅；
	4. 博主进行批量操作将正常评论设置为通过审阅；
	5. 系统提示博主操作成功；
- 拓展情境：暂无；
- 后置条件：通过审核的评论将正常显示在相应文章下，未通过审核的评论将使用预留文字显示在相关文章下；